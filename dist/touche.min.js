/*! Touché - v1.0.10 - 2013-11-20
* https://github.com/stoffeastrom/touche/
* Copyright (c) 2013 Christoffer Åström, Andrée Hansson; Licensed MIT */
(function(t){"use strict";t.augment=function(t){var e=this.prototype,i=Object.create(e),n=t.call(i,this,e);return"function"!=typeof n&&(n=function(){}),i.constructor=n,n.prototype=i,n}})(Function.prototype),function(){"use strict";var t;t=window.Touche=function(e){if(e===void 0)throw Error("No element sent into Touche()");return this instanceof t?(this.elem=e,this.gestureHandler=t.cache.get(e),void 0):new t(e)},t.prototype.on=function(e,i){return t.prototype[e].call(this,i),this},t.prototype.off=function(e,i){return this.gestureHandler.gestures.filter(function(t){return e&&"*"!==e&&i?t.type===e&&t.id===i:e&&"*"===e&&i?t.id===i:e?t.type===e:!0}).forEach(function(t){t.off(this.elem),this.gestureHandler.removeGesture(t)},this),0===this.gestureHandler.gestures.length&&1===t.cache.data.length&&t.cache.remove(this.elem),this},t._handlers=[],t._gestures={},t.gestures={add:function(e,i){t._gestures[e]=i,t.prototype[e]=function(n){var s,o=new t.Binder(n);return s=new i(this.gestureHandler,e,o),this.gestureHandler.addGesture(s),s.on(this.elem),this}},get:function(e){return t._gestures[e]},remove:function(e){t._gestures[e]&&(t.cache.data.forEach(function(t){t.context.gestures.filter(function(t){return t.type===e}).forEach(function(e){t.context.removeGesture(e)})}),delete t.prototype[e],delete t._gestures[e])}}}(),function(t,e,i){"use strict";var n=9;t.utils={noop:function(){},getSortKey:function(){return 5*++n},isSVG:function(t){return 1===t.nodeType&&"http://www.w3.org/2000/svg"===t.namespaceURI},closest:function(t,e){var i=function(t,e){return t.toUpperCase()===e.toUpperCase()},n=t.parentNode;if(!n)return null;if(i(t.tagName,e))return t;if(i(n.tagName,e))return n;for(;n;)if(n=n.parentNode,i(n.tagName,e))return n;return null},transformPoint:function(e,i){var n,s;return e&&t.utils.isSVG(e)&&(n=t.utils.closest(e,"svg"))?(s=n.createSVGPoint(),s.x=i.x,s.y=i.y,s=s.matrixTransform(e.getScreenCTM().inverse()),new t.Point(s.x,s.y)):i},getRect:function(e){var i,n,s,o=window,r=o.document,a=r.body;return t.utils.isSVG(e)?(s=e.getBBox||e.getBoundingClientRect,i=s.call(e),new t.Rect((i.x||i.left||0)+(o.scrollX||r.documentElement.scrollLeft),(i.y||i.top||0)+(o.scrollY||r.documentElement.scrollTop),i.width,i.height)):(n=o!==e&&r!==e&&e.getBoundingClientRect?e:a,i=n.getBoundingClientRect(),new t.Rect(i.left+(o.scrollX||r.documentElement.scrollLeft),i.top+(o.scrollY||r.documentElement.scrollTop),i.width,i.height))},touch:"ontouchstart"in window,msPointer:window.navigator.msPointerEnabled,getFlowType:function(t){switch(t){case"mousedown":case"mousemove":case"mouseup":return"mouse";case"touchstart":case"touchmove":case"touchend":case"touchcancel":return"touch";case"MSPointerDown":case"MSPointerMove":case"MSPointerUp":case"MSPointerCancel":return"MSPointer";case"pointerdown":case"pointermove":case"pointerup":case"pointercancel":return"pointer";default:throw"Not implemented!"}},getFlowTypes:function(t){switch(t){case"mousedown":return["mouse"];case"touchstart":return["touch"];case"MSPointerDown":return["MSPointer"];case"pointerdown":return["pointer"];default:return["mouse","touch","MSPointer","pointer"]}},getEvent:function(t,e){switch(t){case"update":switch(e){case"mouse":return"mousemove";case"touch":return"touchmove";case"MSPointer":return"MSPointerMove";case"pointer":return"pointermove"}break;case"end":switch(e){case"mouse":return"mouseup";case"touch":return"touchend";case"MSPointer":return"MSPointerUp";case"pointer":return"pointerup"}break;case"cancel":switch(e){case"touch":return"touchcancel";case"MSPointer":return"MSPointerCancel";case"pointer":return"pointercancel"}break;default:throw"Not implemented!"}},getEvents:function(){return{start:["mousedown","touchstart","MSPointerDown","pointerdown"],update:["mousemove","touchmove","MSPointerMove","pointermove"],end:["mouseup","touchend","MSPointerUp","pointerup"],cancel:["touchcancel","MSPointerCancel","pointercancel"]}},logger:function(t,e){if(t.touches){e=t[e||"touches"];var i="",n=e.length;i+="touches: "+n,i+=e.map(function(t){return"x:"+t.pageX+", "+t.pageY}).join(" "),window.console.log(i)}},isFunction:function(t){return"[object Function]"===Object.prototype.toString.call(t)},isArray:function(t){return Array.isArray(t)},isObject:function(t){return"[object Object]"===Object.prototype.toString.call(t)},getAngle:function(t,n){var s=t.x-n.x,o=t.y-n.y,r=e(o,s),a=180*r/i;return a=0>a?360+a:a},getDeltaAngle:function(t,n){var s=n.x-t.x,o=n.y-t.y,r=e(o,s),a=180*r/i;return a},getDirection:function(t){var e="invalid";return t>=0&&45>t||t>=315&&360>=t?e="right":t>=45&&135>t?e="down":t>=135&&225>t?e="left":t>=225&&315>t&&(e="up"),e},getVelocity:function(t,e,i,n){var s=t.distanceTo(e),o=n-i;return 26.67*s/o}}}(window.Touche,Math.atan2,Math.PI),function(t){"use strict";t.cache={data:[],has:function(t){return this.data.filter(function(e){return e.elem===t})},get:function(e){var i=this.has(e);return 0===i.length?this.data[this.data.push({elem:e,context:new t.GestureHandler(e)})-1].context:i[0].context},remove:function(t){var e,i=this.has(t);i.length&&(e=this.data.indexOf(i[0]),this.data.splice(e,1))}}}(window.Touche),function(t,e){t.FlowHandler=Object.augment(function(){function i(t){this.element=t}return this.activate=function(){t.utils.getEvents().start.forEach(function(t){this.on(this.element,t)},this)},this.deactivate=function(){t.utils.getEvents().start.forEach(function(t){this.off(this.element,t)},this),this.bindDoc(!1),this.resetFlowTypes(),t.cache.remove(this.element)},this.on=function(e,i){t.utils.msPointer&&(e.style&&e.style.msTouchAction?this.msTouchAction=e.style.msTouchAction:e.style||(e.style=""),e.style.msTouchAction="none"),e.addEventListener(i,this,!1)},this.off=function(e,i){e.removeEventListener(i,this,!1),t.utils.msPointer&&e.style&&(e.style.msTouchAction=this.msTouchAction)},this.bindDoc=function(i,n){var s,o=t.utils.getFlowTypes(n);o.forEach(function(n){s=[t.utils.getEvent("update",n),t.utils.getEvent("end",n),t.utils.getEvent("cancel",n)],s.forEach(function(t){t&&this[i?"on":"off"](e,t)},this)},this)},this.handleEvent=function(t){switch(t.type){case"mousedown":case"touchstart":case"MSPointerDown":case"pointerstart":this.onStart(t);break;case"mousemove":case"touchmove":case"MSPointerMove":case"pointermove":this.onUpdate(t);break;case"mouseup":case"touchend":case"MSPointerUp":case"pointerup":this.onEnd(t);break;case"touchcancel":case"MSPointerCancel":case"pointercancel":this.onCancel(t)}},this.onStart=function(){},this.start=function(){},this.onUpdate=function(){},this.update=function(){},this.onEnd=function(){},this.end=function(){},this.onCancel=function(){},this.cancel=function(){},i})}(window.Touche,window.document),function(t){"use strict";function e(e){n.length=0,clearTimeout(i),e.forEach(function(e){n.push(new t.Point(e.x,e.y))}),i=setTimeout(function(){n.length=0},800)}var i,n=[];t.GestureHandler=t.FlowHandler.augment(function(i,s){function o(e){this.element=e,this.gestures=[],this.sortedGestures=[],this.data={},t.utils.getFlowTypes().forEach(function(t){this.data[t]={},this.data[t].points=[],this.data[t].pointerIds=[],this.data[t].pagePoints=[],this.data[t].started=!1,this.data[t].ended=!1,this.data[t].relatedTarget=null},this)}return this.reset=function(t){this.gestures.forEach(function(t){t.reset()}),this.data[t]={},this.data[t].points=[],this.data[t].pointerIds=[],this.data[t].pagePoints=[],this.data[t].started=!1,this.data[t].ended=!1,this.data[t].relatedTarget=null},this.trigger=function(e,i,n){this.sortedGestures.map(function(t){return t.context}).forEach(function(s){s.paused&&t.utils.isFunction(s[e])&&!s.cancelled?s.addPausedCallback(e,i,n):t.utils.isFunction(s[e])&&!s.cancelled&&s[e](i,n)},this)},this.play=function(t){t=t||!1,this.sortedGestures.map(function(t){return t.context}).filter(function(t){return t.paused}).forEach(function(e){e.play(t)})},this.pause=function(t,e){this.sortedGestures.map(function(t){return t.context}).filter(function(i){return t?e!==i&&t===i.type:e!==i}).forEach(function(t){t.pause()})},this.addGesture=function(t){this.gestures.push(t),this.sortGestures(),1===this.gestures.length&&this.activate()},this.removeGesture=function(t){this.gestures=this.gestures.filter(function(e){return e!==t}),this.sortGestures(),0===this.gestures.length&&this.deactivate()},this.removeGestures=function(t){this.gestures.filter(function(e){return t?e.type===t:!0}).forEach(function(t){this.removeGesture(t)},this)},this.cancelGesture=function(t){t.cancelled||(t.cancel(),t.cancelled=!0)},this.cancelGestures=function(t){return this.gestures.filter(function(e){return e.type!==t}).forEach(function(t){this.cancelGesture(t)},this),this},this.cancelAllGestures=function(){this.gestures.forEach(function(t){this.cancelGesture(t)},this),this.resetFlowTypes(!0)},this.sortGestures=function(){this.sortedGestures=this.gestures.map(function(t){return{key:t.sortKey,context:t}}).sort(function(t,e){return t.key-e.key})},this.isOtherFlowStarted=function(e){var i,n=t.utils.getFlowTypes(),s=n.length;for(i=0;s>i;++i)if(e!==n[i]&&this.data[n[i]].started)return!0;return!1},this.resetFlowTypes=function(e){e=e||!1;var i,n=t.utils.getFlowTypes(),s=n.length;for(i=0;s>i;++i)this.data[n[i]].started&&this.data[n[i]].ended?this.reset(n[i]):e&&this.reset(n[i])},this.isEmulatedMouseEvents=function(e){if(e.isSimulated)return!1;var i,s=t.utils.getFlowType(e.type),o=new t.Point(e.pageX,e.pageY);return"mouse"!==s?!1:1!==n.length?!1:(i=n[0],25>o.distanceTo(i)?!0:!1)},this.onStart=function(e){t._superHandler.addHandler(this,e)},this.start=function(e){var i=t.utils.getFlowType(e.type);this.isOtherFlowStarted(i)||this.isEmulatedMouseEvents(e)||(this.resetFlowTypes(),this.data[i].relatedTarget=e.target,this.setPoints(e),this.trigger("start",e,this.data[i]),this.data[i].started=!0)},this.update=function(e){var i=t.utils.getFlowType(e.type);this.isOtherFlowStarted(i)||this.isEmulatedMouseEvents(e)||(this.setPoints(e),this.trigger("update",e,this.data[i]))},this.end=function(e){var i=t.utils.getFlowType(e.type);return this.data.touch.started&&!this.data.touch.ended&&"mouseup"===e.type?(this.trigger("end",e,this.data.touch),this.data.touch.ended=!0,void 0):(this.isOtherFlowStarted(i)||this.isEmulatedMouseEvents(e)||(this.trigger("end",e,this.data[i]),this.data[i].ended=!0),void 0)},this.cancel=function(e){var i=t.utils.getFlowType(e.type);this.trigger("cancel",e,this.data[i]),this.data[i].ended=!0},this.handleEvent=function(e){var i=t.utils.getFlowType(e.type);this.isOtherFlowStarted(i)||this.isEmulatedMouseEvents(e)||s.handleEvent.call(this,e)},this.setPoints=function(i,n){n=n||"touches";var s,o,r,a,h,u=t.utils.getFlowType(i.type);switch(u){case"mouse":this.data[u].points.length=1,this.data[u].pagePoints.length=1,this.data[u].points[0]=t.utils.transformPoint(this.data[u].relatedTarget,new t.Point(i.pageX,i.pageY)),this.data[u].pagePoints[0]=new t.Point(i.pageX,i.pageY);break;case"touch":for(r=i[n],o=r.length,s=0;o>s;++s)this.data[u].points.length=o,this.data[u].pagePoints.length=o,this.data[u].points[s]=t.utils.transformPoint(this.data[u].relatedTarget,new t.Point(r[s].pageX,r[s].pageY)),this.data[u].pagePoints[s]=new t.Point(r[s].pageX,r[s].pageY);e(this.data[u].pagePoints);break;case"MSPointer":case"pointer":a=i.pointerId,h=this.data[u].pointerIds.indexOf(a),0>h&&(h=this.data[u].pointerIds.push(a)-1),o=this.data[u].pointerIds.length,this.data[u].points.length=o,this.data[u].pagePoints.length=o,this.data[u].points[h]=t.utils.transformPoint(this.data[u].relatedTarget,new t.Point(i.pageX,i.pageY)),this.data[u].pagePoints[h]=new t.Point(i.pageX,i.pageY),e(this.data[u].pagePoints);break;default:throw"Not implemented!"}},o})}(window.Touche),function(t,e){t.SuperHandler=t.FlowHandler.augment(function(){function e(){this._handlers=[],t.FlowHandler.apply(this,arguments)}return this.addHandler=function(t){var e=this._handlers.indexOf(t);-1===e&&this._handlers.push(t)},this.onStart=function(t){this._handlers.forEach(function(e){e.start(t)}),this.bindDoc(!0,t.type)},this.onUpdate=function(t){this._handlers.forEach(function(e){e.update(t)})},this.onEnd=function(t){this.bindDoc(!1,t.type),this._handlers.forEach(function(e){e.end(t)}),this._handlers.length=0},this.onCancel=function(t){this.bindDoc(!1,t.type),this._handlers.forEach(function(e){e.cancel(t)}),this._handlers.length=0},this.onDragStart=function(){this._handlers.forEach(function(t){t.cancelAllGestures()})},e}),t._superHandler=new t.SuperHandler(e),t._superHandler.activate(),document.addEventListener("dragstart",function(e){t._superHandler.onDragStart(e)},!1),t.preventGestures=function(e){var i,n,s=t._superHandler._handlers,o=s.length;for(i=o-1;i>=0&&(n=s[i],n!==e);--i)n.cancelAllGestures(),s.splice(i,1)}}(window.Touche,window.document),function(t){"use strict";t.Gesture=Object.augment(function(){function e(e,i,n){this.gestureHandler=e,this.type=i,this.binder=n,this.started=!1,this.cancelled=!1,this.pausedCallbacks=[],this.paused=!1,this.countTouches=0,this.options={},this.setOptions(),this.sortKey=this.options.precedence||t.utils.getSortKey(),this.id=this.binder.id}return this.on=t.utils.noop,this.off=t.utils.noop,this.start=t.utils.noop,this.update=t.utils.noop,this.end=t.utils.noop,this.cancel=function(){this.cancelled=!0},this.pause=function(){this.paused=!0},this.addPausedCallback=function(t,e,i){this.pausedCallbacks.push({action:t,event:e,data:i})},this.play=function(t){t&&!this.cancelled?this.pausedCallbacks.forEach(function(t){this[t.action](t.event,t.data)},this):this.gestureHandler.cancelGesture(this),this.paused=!1,this.pausedCallbacks=[],this.reset()},this.setOptions=function(){Object.keys(this.defaults).forEach(function(t){this.options[t]=this.binder.options&&this.binder.options[t]!==void 0?this.binder.options[t]:this.defaults[t]},this)},this.hasMoreTouches=function(t){return this.countTouches=t.length>this.countTouches?t.length:this.countTouches,this.countTouches>0&&this.countTouches>this.options.touches},this.hasNotEqualTouches=function(t){return this.hasMoreTouches(t),this.countTouches>0&&this.countTouches!==this.options.touches},this.hasEqualTouches=function(t){return this.countTouches=t.length,this.countTouches===this.options.touches},this.isValidMouseButton=function(e,i){if(t.utils.touch)return!0;if(t.utils.msPointer&&e.pointerType!==e.MSPOINTER_TYPE_MOUSE)return!0;var n,s=e.button,o=e.which;return n=o||void 0===s?o:1&s?1:2&s?3:4&s?2:0,t.utils.isArray(i)?i.some(function(t){return n===t}):n===i},this.reset=function(){this.paused||(this.started=!1,this.cancelled=!1,this.countTouches=0)},e})}(window.Touche),function(t){"use strict";t.Binder=Object.augment(function(){function e(t){this.bind(t)}return this.start=t.utils.noop,this.update=t.utils.noop,this.end=t.utils.noop,this.cancel=t.utils.noop,this.bind=function(t){Object.keys(t||{}).forEach(function(e){this[e]=t[e]},this)},e})}(window.Touche),function(t,e){"use strict";t.Point=function(t,e){this.x=t,this.y=e},t.Point.prototype.distanceTo=function(t){var i=this.x-t.x,n=this.y-t.y,s=e(i*i+n*n);return s},t.Point.prototype.normalize=function(){var i=e(this.x*this.x+this.y*this.y),n=this.x/i,s=this.y/i;return new t.Point(n,s)}}(window.Touche,Math.sqrt),function(t){"use strict";t.Rect=function(t,e,i,n){this.x=t,this.y=e,this.width=i,this.height=n},t.Rect.prototype.pointInside=function(t,e){e=e||0;var i=this.x-e,n=this.y-e,s=this.x+this.width+e,o=this.y+this.height+e;return t.x>=i&&s>=t.x&&t.y>=n&&o>=t.y}}(window.Touche),function(){for(var t=0,e=["ms","moz","webkit","o"],i=0;e.length>i&&!window.requestAnimationFrame;++i)window.requestAnimationFrame=window[e[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[i]+"CancelAnimationFrame"]||window[e[i]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e){var i=(new Date).getTime(),n=Math.max(0,16-(i-t)),s=window.setTimeout(function(){e(i+n)},n);return t=i+n,s}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),function(t){"use strict";var e=t.Gesture.augment(function(e){function i(){e.apply(this,arguments)}return this.defaults={areaThreshold:5,timeThreshold:400,touches:1,precedence:4,preventDefault:!0,which:1},this.on=function(e){this.count=0,t(e).on("tap",{options:{areaThreshold:this.options.areaThreshold,preventDefault:this.options.preventDefault,touches:this.options.touches,which:this.options.which},id:this.id,end:this.end})},this.off=function(e){t(e).off("tap",this.id)},this.end=function(t,e){if(!this.isValidMouseButton(t,this.options.which))return this.cancel(),void 0;var i=this;++i.count,1===i.count?(i.startTime=+new Date,i.gestureHandler.pause(null,this),i.timerId=setTimeout(function(){i.gestureHandler.play(!0),i.count=0},i.options.timeThreshold+5)):2===i.count&&(window.clearTimeout(i.timerId),i.endTime=+new Date,i.startTime+i.options.timeThreshold>=i.endTime&&(i.gestureHandler.play(),i.binder.end.call(i,t,e)),i.count=0),this.options.preventDefault&&t.preventDefault()},this.cancel=function(){this.cancelled=!0,window.clearTimeout(this.timerId)},i});t.gestures.add("doubletap",e)}(window.Touche),function(t){"use strict";var e=t.Gesture.augment(function(e){function i(){e.apply(this,arguments)}return this.defaults={areaThreshold:5,timeThreshold:800,precedence:5,preventDefault:!0,touches:1,interval:25,which:1},this.preventDefaultForMSPointer=function(e){if(t.utils.msPointer){var i=window.document,n=["MSHoldVisual","MSGestureHold","contextmenu"],s=function(t){t.preventDefault()};n.forEach(function(t){i[e?"addEventListener":"removeEventListener"](t,s,!1)})}},this.pause=function(){this.paused=!0,window.clearTimeout(this.timerId)},this.start=function(e,i){if(!this.isValidMouseButton(e,this.options.which)||this.hasMoreTouches(i.pagePoints))return this.cancel(),void 0;this.rect=t.utils.getRect(this.gestureHandler.element),this.count=0,this.intervalSteps=this.options.timeThreshold/this.options.interval,this.startTime=+new Date;var n=this;window.clearTimeout(n.timerId),n.timerId=window.setInterval(function(){++n.count,i.percentage=100*(n.count/n.intervalSteps),1===n.count?(n.started=!0,n.binder.start.call(n,e,i)):n.binder.update.call(n,e,i),n.count>=n.intervalSteps&&window.clearTimeout(n.timerId)},this.options.interval),this.options.preventDefault&&(e.preventDefault(),this.preventDefaultForMSPointer(!0))},this.update=function(t,e){(this.hasMoreTouches(e.pagePoints)||!this.rect.pointInside(e.pagePoints[0],this.options.areaThreshold))&&this.cancel(),this.options.preventDefault&&t.preventDefault()},this.end=function(t,e){return window.clearTimeout(this.timerId),this.hasNotEqualTouches(e.pagePoints)?(this.cancel(),void 0):(this.rect.pointInside(e.pagePoints[0],this.options.areaThreshold)&&this.startTime+this.options.timeThreshold<=+new Date?(this.gestureHandler.cancelGestures(this.type),this.binder.end.call(this,t,e)):this.cancel(),this.options.preventDefault&&(t.preventDefault(),this.preventDefaultForMSPointer(!1)),void 0)},this.cancel=function(){window.clearTimeout(this.timerId),this.cancelled||(this.cancelled=!0,this.started&&this.binder.cancel.call(this),this.options.preventDefault&&this.preventDefaultForMSPointer(!1))},i});t.gestures.add("longtap",e)}(window.Touche),function(t,e){"use strict";var i=t.Gesture.augment(function(i){function n(){i.apply(this,arguments)}return this.defaults={touches:2,pinchThreshold:12,preventDefault:!0},this.start=function(e,i){return this.rect=t.utils.getRect(this.gestureHandler.element),this.pinch={start:{},current:{}},this.hasMoreTouches(i.pagePoints)?(this.cancel(),void 0):(this.pinch.start.point1=i.pagePoints[0],this.pinch.start.point2=i.pagePoints[1],this.options.preventDefault&&e.preventDefault(),void 0)},this.update=function(i,n){return this.hasMoreTouches(n.pagePoints)?(this.cancel(),void 0):(this.hasEqualTouches(n.pagePoints)&&(this.pinch.start.point2?(n.centerPoint||(n.centerPoint=new t.Point((this.pinch.start.point1.x+this.pinch.start.point2.x)/2,(this.pinch.start.point1.y+this.pinch.start.point2.y)/2)),this.pinch.current.point1=n.pagePoints[0],this.pinch.current.point2=n.pagePoints[1],this.startDistance=this.pinch.start.point2.distanceTo(this.pinch.start.point1),this.lastDistance=this.currentDistance,this.currentDistance=this.pinch.current.point2.distanceTo(this.pinch.current.point1),this.pinchLength=e(this.startDistance-this.currentDistance),this.scale=this.currentDistance/this.startDistance,n.scale=this.scale,n.delta=this.currentDistance-this.lastDistance,n.centerPoint.x=(this.pinch.current.point1.x+this.pinch.current.point2.x)/2,n.centerPoint.y=(this.pinch.current.point1.y+this.pinch.current.point2.y)/2,!this.started&&this.pinchLength>=this.options.pinchThreshold?(this.started=!0,this.gestureHandler.cancelGestures(this.type),this.binder.start.call(this,i,n)):this.started&&this.binder.update.call(this,i,n)):this.pinch.start.point2=n.pagePoints[1]),this.options.preventDefault&&i.preventDefault(),void 0)},this.end=function(t,e){this.started&&this.binder.end.call(this,t,e),this.options.preventDefault&&t.preventDefault()},this.cancel=function(){this.cancelled||(this.cancelled=!0,this.started&&this.binder.cancel.call(this.bindingObj))},n});t.gestures.add("pinch",i)}(window.Touche,Math.abs),function(t){"use strict";var e=t.Gesture.augment(function(e){function i(){e.apply(this,arguments)}return this.defaults={touches:2,rotationThreshold:12,preventDefault:!0},this.start=function(e,i){return this.rect=t.utils.getRect(this.gestureHandler.element),this.rotate={start:{},current:{}},this.hasMoreTouches(i.pagePoints)?(this.cancel(),void 0):(this.rotate.start.point1=i.pagePoints[0],this.rotate.start.point2=i.pagePoints[1],this.options.preventDefault&&e.preventDefault(),void 0)},this.update=function(e,i){return this.hasMoreTouches(i.pagePoints)?(this.cancel(),void 0):(this.hasEqualTouches(i.pagePoints)&&(this.rotate.start.point2?(this.rotate.current.point1=i.pagePoints[0],this.rotate.current.point2=i.pagePoints[1],this.startAngle=t.utils.getDeltaAngle(this.rotate.start.point2,this.rotate.start.point1),this.currentAngle=t.utils.getDeltaAngle(this.rotate.current.point2,this.rotate.current.point1),this.rotation=this.currentAngle-this.startAngle,i.rotation=this.rotation,!this.started&&Math.abs(this.rotation)>=this.options.rotationThreshold?(this.started=!0,this.gestureHandler.cancelGestures(this.type),this.binder.start.call(this,e,i)):this.started&&this.binder.update.call(this,e,i)):this.rotate.start.point2=i.pagePoints[1]),this.options.preventDefault&&e.preventDefault(),void 0)},this.end=function(t,e){this.started&&this.binder.end.call(this,t,e),this.options.preventDefault&&t.preventDefault()},this.cancel=function(){this.cancelled||(this.cancelled=!0,this.started&&this.bindingObj.cancel.call(this.bindingObj))},i});t.gestures.add("rotate",e)}(window.Touche),function(t,e){"use strict";var i=t.Gesture.augment(function(i){function n(){i.apply(this,arguments)}return this.defaults={radiusThreshold:12,preventDefault:!0,touches:1,which:1,useMomentum:!1,inertia:.7},this.setSwipe=function(i){this.swipe.lastTime=this.swipe.currentTime,this.swipe.lastPoint=this.swipe.currentPoint,this.swipe.currentPoint=i,this.swipe.currentTime=+new Date,this.swipe.deltaX=this.swipe.currentPoint.x-this.swipe.startPoint.x,this.swipe.deltaY=this.swipe.currentPoint.y-this.swipe.startPoint.y,this.swipe.curDeltaX=this.swipe.currentPoint.x-this.swipe.lastPoint.x,this.swipe.curDeltaY=this.swipe.currentPoint.y-this.swipe.lastPoint.y,this.swipe.velocity=t.utils.getVelocity(this.swipe.startPoint,this.swipe.currentPoint,this.swipe.startTime,this.swipe.currentTime),this.swipe.momentum=t.utils.getVelocity(this.swipe.lastPoint,this.swipe.currentPoint,this.swipe.lastTime,this.swipe.currentTime),this.swipe.angle=t.utils.getAngle(this.swipe.startPoint,this.swipe.currentPoint),this.swipe.direction=t.utils.getDirection(this.swipe.angle),this.swipe.elementDistance="left"===this.swipe.direction||"right"===this.swipe.direction?this.rect.width:this.rect.height,this.swipe.distance="left"===this.swipe.direction||"right"===this.swipe.direction?e(this.swipe.deltaX):e(this.swipe.deltaY),this.swipe.percentage=100*(this.swipe.distance/this.swipe.elementDistance)},this.start=function(e,i){return this.rect=t.utils.getRect(this.gestureHandler.element),this.swipe={inEndMomentum:!1},this.countTouches=0,!this.isValidMouseButton(e,this.options.which)||this.hasMoreTouches(i.pagePoints)?(this.cancel(),void 0):(this.swipe.startPoint=this.swipe.currentPoint=i.pagePoints[0],this.swipe.startTime=this.swipe.currentTime=+new Date,this.options.preventDefault&&e.preventDefault(),void 0)},this.update=function(t,e){return this.hasMoreTouches(e.pagePoints)?(this.cancel(),void 0):(this.hasEqualTouches(e.pagePoints)&&(this.setSwipe(e.pagePoints[0]),e.swipe=this.swipe,!this.started&&this.swipe.startPoint.distanceTo(this.swipe.currentPoint)>=this.options.radiusThreshold?(this.gestureHandler.cancelGestures(this.type),this.started=!0,this.binder.start.call(this,t,e)):this.started&&this.binder.update.call(this,t,e),this.swipe.startTime=this.swipe.currentTime),this.options.preventDefault&&t.preventDefault(),void 0)},this.end=function(e,i){var n,s,o,r,a,h=this.options.inertia;this.started&&(this.options.useMomentum?(this.swipe.inEndMomentum=!0,n=new t.Point(this.swipe.curDeltaX,this.swipe.curDeltaY).normalize(),s=this.swipe.momentum,o=this,r=new t.Point(i.points[0].x,i.points[0].y),h>=1&&(h=this.defaults.inertia),a=function(){s*=h,o.swipe.inEndMomentum&&s>1?(r.x+=n.x*s,r.y+=n.y*s,i.pagePoints[0]=new t.Point(r.x,r.y),o.update(e,i),window.requestAnimationFrame(a)):o.binder.end.call(this,e,i)},window.requestAnimationFrame(a)):this.binder.end.call(this,e,i)),this.options.preventDefault&&e.preventDefault()},this.cancel=function(){this.cancelled||(this.cancelled=!0,this.started&&this.binder.cancel.call(this))},n});t.gestures.add("swipe",i)}(window.Touche,Math.abs),function(t){"use strict";var e=t.Gesture.augment(function(e){function i(){e.apply(this,arguments)}return this.defaults={areaThreshold:5,precedence:6,preventDefault:!0,touches:1,which:1},this.start=function(e,i){return this.started=!0,this.rect=t.utils.getRect(this.gestureHandler.element),!this.isValidMouseButton(e,this.options.which)||this.hasMoreTouches(i.pagePoints)?(this.cancel(),void 0):(this.binder.start.call(this,e,i),this.options.preventDefault&&e.preventDefault(),void 0)},this.update=function(t,e){return this.started?this.hasMoreTouches(e.pagePoints)||!this.rect.pointInside(e.pagePoints[0],this.options.areaThreshold)?(this.cancel(),void 0):(this.options.preventDefault&&t.preventDefault(),void 0):void 0},this.end=function(t,e){this.started&&(this.hasNotEqualTouches(e.pagePoints)||(this.rect.pointInside(e.pagePoints[0],this.options.areaThreshold)&&(this.gestureHandler.cancelGestures(this.type),this.binder.end.call(this,t,e)),this.options.preventDefault&&t.preventDefault()))},this.cancel=function(t,e){this.cancelled=!0,this.binder.cancel.call(this,t,e)},i});t.gestures.add("tap",e)}(window.Touche);