/*! Touché - v1.0.10 - 2013-11-10
* https://github.com/stoffeastrom/touche/
* Copyright (c) 2013 Christoffer Åström, Andrée Hansson; Licensed MIT */
!function(a){"use strict";a.augment=function(a){var b=this.prototype,c=Object.create(b),d=a.call(c,this,b);return"function"!=typeof d&&(d=function(){}),c.constructor=d,d.prototype=c,d}}(Function.prototype),function(){"use strict";var a;a=window.Touche=function(b){if("undefined"==typeof b)throw new Error("No element sent into Touche()");return this instanceof a?(this.elem=b,this.gestureHandler=a.cache.get(b),void 0):new a(b)},a.prototype.on=function(b,c){return a.prototype[b].call(this,c),this},a.prototype.off=function(b,c){return this.gestureHandler.gestures.filter(function(a){return b&&"*"!==b&&c?a.type===b&&a.id===c:b&&"*"===b&&c?a.id===c:b?a.type===b:!0}).forEach(function(a){a.off(this.elem),this.gestureHandler.removeGesture(a)},this),0===this.gestureHandler.gestures.length&&1===a.cache.data.length&&a.cache.remove(this.elem),this},a._handlers=[],a._gestures={},a.gestures={add:function(b,c){a._gestures[b]=c,a.prototype[b]=function(d){var e,f=new a.Binder(d);return e=new c(this.gestureHandler,b,f),this.gestureHandler.addGesture(e),e.on(this.elem),this}},get:function(b){return a._gestures[b]},remove:function(b){a._gestures[b]&&(a.cache.data.forEach(function(a){a.context.gestures.filter(function(a){return a.type===b}).forEach(function(b){a.context.removeGesture(b)})}),delete a.prototype[b],delete a._gestures[b])}}}(),function(a,b,c){"use strict";var d=9;a.utils={noop:function(){},getSortKey:function(){return 5*++d},isSVG:function(a){return 1===a.nodeType&&"http://www.w3.org/2000/svg"===a.namespaceURI},closest:function(a,b){var c=function(a,b){return a.toUpperCase()===b.toUpperCase()},d=a.parentNode;if(!d)return null;if(c(a.tagName,b))return a;if(c(d.tagName,b))return d;for(;d;)if(d=d.parentNode,c(d.tagName,b))return d;return null},transformPoint:function(b,c){var d,e;return b&&a.utils.isSVG(b)&&(d=a.utils.closest(b,"svg"))?(e=d.createSVGPoint(),e.x=c.x,e.y=c.y,e=e.matrixTransform(b.getScreenCTM().inverse()),new a.Point(e.x,e.y)):c},getRect:function(b){var c,d,e,f=window,g=f.document,h=g.body;return a.utils.isSVG(b)?(e=b.getBBox||b.getBoundingClientRect,c=e.call(b),new a.Rect((c.x||c.left||0)+(f.scrollX||g.documentElement.scrollLeft),(c.y||c.top||0)+(f.scrollY||g.documentElement.scrollTop),c.width,c.height)):(d=f!==b&&g!==b&&b.getBoundingClientRect?b:h,c=d.getBoundingClientRect(),new a.Rect(c.left+(f.scrollX||g.documentElement.scrollLeft),c.top+(f.scrollY||g.documentElement.scrollTop),c.width,c.height))},touch:"ontouchstart"in window,msPointer:window.navigator.msPointerEnabled,getFlowType:function(a){switch(a){case"mousedown":case"mousemove":case"mouseup":return"mouse";case"touchstart":case"touchmove":case"touchend":case"touchcancel":return"touch";case"MSPointerDown":case"MSPointerMove":case"MSPointerUp":case"MSPointerCancel":return"MSPointer";case"pointerdown":case"pointermove":case"pointerup":case"pointercancel":return"pointer";default:throw"Not implemented!"}},getFlowTypes:function(a){switch(a){case"mousedown":return["mouse"];case"touchstart":return["touch"];case"MSPointerDown":return["MSPointer"];case"pointerdown":return["pointer"];default:return["mouse","touch","MSPointer","pointer"]}},getEvent:function(a,b){switch(a){case"update":switch(b){case"mouse":return"mousemove";case"touch":return"touchmove";case"MSPointer":return"MSPointerMove";case"pointer":return"pointermove"}break;case"end":switch(b){case"mouse":return"mouseup";case"touch":return"touchend";case"MSPointer":return"MSPointerUp";case"pointer":return"pointerup"}break;case"cancel":switch(b){case"touch":return"touchcancel";case"MSPointer":return"MSPointerCancel";case"pointer":return"pointercancel"}break;default:throw"Not implemented!"}},getEvents:function(){return{start:["mousedown","touchstart","MSPointerDown","pointerdown"],update:["mousemove","touchmove","MSPointerMove","pointermove"],end:["mouseup","touchend","MSPointerUp","pointerup"],cancel:["touchcancel","MSPointerCancel","pointercancel"]}},logger:function(a,b){if(a.touches){b=a[b||"touches"];var c="",d=b.length;c+="touches: "+d,c+=b.map(function(a){return"x:"+a.pageX+", "+a.pageY}).join(" "),window.console.log(c)}},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isArray:function(a){return Array.isArray(a)},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},getAngle:function(a,d){var e=a.x-d.x,f=a.y-d.y,g=b(f,e),h=180*g/c;return h=0>h?360+h:h},getDeltaAngle:function(a,d){var e=d.x-a.x,f=d.y-a.y,g=b(f,e),h=180*g/c;return h},getDirection:function(a){var b="invalid";return a>=0&&45>a||a>=315&&360>=a?b="right":a>=45&&135>a?b="down":a>=135&&225>a?b="left":a>=225&&315>a&&(b="up"),b},getVelocity:function(a,b,c,d){var e=a.distanceTo(b),f=d-c;return 26.67*e/f}}}(window.Touche,Math.atan2,Math.PI),function(a){"use strict";a.cache={data:[],has:function(a){return this.data.filter(function(b){return b.elem===a})},get:function(b){var c=this.has(b);return 0===c.length?this.data[this.data.push({elem:b,context:new a.GestureHandler(b)})-1].context:c[0].context},remove:function(a){var b,c=this.has(a);c.length&&(b=this.data.indexOf(c[0]),this.data.splice(b,1))}}}(window.Touche),function(a,b){a.FlowHandler=Object.augment(function(){function c(a){this.element=a}return this.activate=function(){a.utils.getEvents().start.forEach(function(a){this.on(this.element,a)},this)},this.deactivate=function(){a.utils.getEvents().start.forEach(function(a){this.off(this.element,a)},this),this.bindDoc(!1),this.resetFlowTypes(),a.cache.remove(this.element)},this.on=function(b,c){a.utils.msPointer&&(b.style&&b.style.msTouchAction?this.msTouchAction=b.style.msTouchAction:b.style||(b.style=""),b.style.msTouchAction="none"),b.addEventListener(c,this,!1)},this.off=function(b,c){b.removeEventListener(c,this,!1),a.utils.msPointer&&b.style&&(b.style.msTouchAction=this.msTouchAction)},this.bindDoc=function(c,d){var e,f=a.utils.getFlowTypes(d);f.forEach(function(d){e=[a.utils.getEvent("update",d),a.utils.getEvent("end",d),a.utils.getEvent("cancel",d)],e.forEach(function(a){a&&this[c?"on":"off"](b,a)},this)},this)},this.handleEvent=function(a){switch(a.type){case"mousedown":case"touchstart":case"MSPointerDown":case"pointerstart":this.onStart(a);break;case"mousemove":case"touchmove":case"MSPointerMove":case"pointermove":this.onUpdate(a);break;case"mouseup":case"touchend":case"MSPointerUp":case"pointerup":this.onEnd(a);break;case"touchcancel":case"MSPointerCancel":case"pointercancel":this.onCancel(a)}},this.onStart=function(){},this.start=function(){},this.onUpdate=function(){},this.update=function(){},this.onEnd=function(){},this.end=function(){},this.onCancel=function(){},this.cancel=function(){},c})}(window.Touche,window.document),function(a){"use strict";function b(b){d.length=0,clearTimeout(c),b.forEach(function(b){d.push(new a.Point(b.x,b.y))}),c=setTimeout(function(){d.length=0},800)}var c,d=[];a.GestureHandler=a.FlowHandler.augment(function(c,e){function f(b){this.element=b,this.gestures=[],this.sortedGestures=[],this.data={},a.utils.getFlowTypes().forEach(function(a){this.data[a]={},this.data[a].points=[],this.data[a].pointerIds=[],this.data[a].pagePoints=[],this.data[a].started=!1,this.data[a].ended=!1,this.data[a].relatedTarget=null},this)}return this.reset=function(a){this.gestures.forEach(function(a){a.reset()}),this.data[a]={},this.data[a].points=[],this.data[a].pointerIds=[],this.data[a].pagePoints=[],this.data[a].started=!1,this.data[a].ended=!1,this.data[a].relatedTarget=null},this.trigger=function(b,c,d){this.sortedGestures.map(function(a){return a.context}).forEach(function(e){e.paused&&a.utils.isFunction(e[b])&&!e.cancelled?e.addPausedCallback(b,c,d):a.utils.isFunction(e[b])&&!e.cancelled&&e[b](c,d)},this)},this.play=function(a){a=a||!1,this.sortedGestures.map(function(a){return a.context}).filter(function(a){return a.paused}).forEach(function(b){b.play(a)})},this.pause=function(a,b){this.sortedGestures.map(function(a){return a.context}).filter(function(c){return a?b!==c&&a===c.type:b!==c}).forEach(function(a){a.pause()})},this.addGesture=function(a){this.gestures.push(a),this.sortGestures(),1===this.gestures.length&&this.activate()},this.removeGesture=function(a){this.gestures=this.gestures.filter(function(b){return b!==a}),this.sortGestures(),0===this.gestures.length&&this.deactivate()},this.removeGestures=function(a){this.gestures.filter(function(b){return a?b.type===a:!0}).forEach(function(a){this.removeGesture(a)},this)},this.cancelGesture=function(a){a.cancelled||(a.cancel(),a.cancelled=!0)},this.cancelGestures=function(a){return this.gestures.filter(function(b){return b.type!==a}).forEach(function(a){this.cancelGesture(a)},this),this},this.cancelAllGestures=function(){this.gestures.forEach(function(a){this.cancelGesture(a)},this),this.resetFlowTypes(!0)},this.sortGestures=function(){this.sortedGestures=this.gestures.map(function(a){return{key:a.sortKey,context:a}}).sort(function(a,b){return a.key-b.key})},this.isOtherFlowStarted=function(b){var c,d=a.utils.getFlowTypes(),e=d.length;for(c=0;e>c;++c)if(b!==d[c]&&this.data[d[c]].started)return!0;return!1},this.resetFlowTypes=function(b){b=b||!1;var c,d=a.utils.getFlowTypes(),e=d.length;for(c=0;e>c;++c)this.data[d[c]].started&&this.data[d[c]].ended?this.reset(d[c]):b&&this.reset(d[c])},this.isEmulatedMouseEvents=function(b){if(b.isSimulated)return!1;var c,e=a.utils.getFlowType(b.type),f=new a.Point(b.pageX,b.pageY);return"mouse"!==e?!1:1!==d.length?!1:(c=d[0],f.distanceTo(c)<25?!0:!1)},this.onStart=function(b){a._superHandler.addHandler(this,b)},this.start=function(b){var c=a.utils.getFlowType(b.type);this.isOtherFlowStarted(c)||this.isEmulatedMouseEvents(b)||(this.resetFlowTypes(),this.data[c].relatedTarget=b.target,this.setPoints(b),this.trigger("start",b,this.data[c]),this.data[c].started=!0)},this.update=function(b){var c=a.utils.getFlowType(b.type);this.isOtherFlowStarted(c)||this.isEmulatedMouseEvents(b)||(this.setPoints(b),this.trigger("update",b,this.data[c]))},this.end=function(b){var c=a.utils.getFlowType(b.type);return this.data.touch.started&&!this.data.touch.ended&&"mouseup"===b.type?(this.trigger("end",b,this.data.touch),this.data.touch.ended=!0,void 0):(this.isOtherFlowStarted(c)||this.isEmulatedMouseEvents(b)||(this.trigger("end",b,this.data[c]),this.data[c].ended=!0),void 0)},this.cancel=function(b){var c=a.utils.getFlowType(b.type);this.trigger("cancel",b,this.data[c]),this.data[c].ended=!0},this.handleEvent=function(b){var c=a.utils.getFlowType(b.type);this.isOtherFlowStarted(c)||this.isEmulatedMouseEvents(b)||e.handleEvent.call(this,b)},this.setPoints=function(c,d){d=d||"touches";var e,f,g,h,i,j=a.utils.getFlowType(c.type);switch(j){case"mouse":this.data[j].points.length=1,this.data[j].pagePoints.length=1,this.data[j].points[0]=a.utils.transformPoint(this.data[j].relatedTarget,new a.Point(c.pageX,c.pageY)),this.data[j].pagePoints[0]=new a.Point(c.pageX,c.pageY);break;case"touch":for(g=c[d],f=g.length,e=0;f>e;++e)this.data[j].points.length=f,this.data[j].pagePoints.length=f,this.data[j].points[e]=a.utils.transformPoint(this.data[j].relatedTarget,new a.Point(g[e].pageX,g[e].pageY)),this.data[j].pagePoints[e]=new a.Point(g[e].pageX,g[e].pageY);b(this.data[j].pagePoints);break;case"MSPointer":case"pointer":h=c.pointerId,i=this.data[j].pointerIds.indexOf(h),0>i&&(i=this.data[j].pointerIds.push(h)-1),f=this.data[j].pointerIds.length,this.data[j].points.length=f,this.data[j].pagePoints.length=f,this.data[j].points[i]=a.utils.transformPoint(this.data[j].relatedTarget,new a.Point(c.pageX,c.pageY)),this.data[j].pagePoints[i]=new a.Point(c.pageX,c.pageY),b(this.data[j].pagePoints);break;default:throw"Not implemented!"}},f})}(window.Touche),function(a,b){a.SuperHandler=a.FlowHandler.augment(function(){function b(){this._handlers=[],a.FlowHandler.apply(this,arguments)}return this.addHandler=function(a){var b=this._handlers.indexOf(a);-1===b&&this._handlers.push(a)},this.onStart=function(a){this._handlers.forEach(function(b){b.start(a)}),this.bindDoc(!0,a.type)},this.onUpdate=function(a){this._handlers.forEach(function(b){b.update(a)})},this.onEnd=function(a){this.bindDoc(!1,a.type),this._handlers.forEach(function(b){b.end(a)}),this._handlers.length=0},this.onCancel=function(a){this.bindDoc(!1,a.type),this._handlers.forEach(function(b){b.cancel(a)}),this._handlers.length=0},this.onDragStart=function(){this._handlers.forEach(function(a){a.cancelAllGestures()})},b}),a._superHandler=new a.SuperHandler(b),a._superHandler.activate(),document.addEventListener("dragstart",function(b){a._superHandler.onDragStart(b)},!1),a.preventGestures=function(b){var c,d,e=a._superHandler._handlers,f=e.length;for(c=f-1;c>=0&&(d=e[c],d!==b);--c)d.cancelAllGestures(),e.splice(c,1)}}(window.Touche,window.document),function(a){"use strict";a.Gesture=Object.augment(function(){function b(b,c,d){this.gestureHandler=b,this.type=c,this.binder=d,this.started=!1,this.cancelled=!1,this.pausedCallbacks=[],this.paused=!1,this.countTouches=0,this.options={},this.setOptions(),this.sortKey=this.options.precedence||a.utils.getSortKey(),this.id=this.binder.id}return this.on=a.utils.noop,this.off=a.utils.noop,this.start=a.utils.noop,this.update=a.utils.noop,this.end=a.utils.noop,this.cancel=function(){this.cancelled=!0},this.pause=function(){this.paused=!0},this.addPausedCallback=function(a,b,c){this.pausedCallbacks.push({action:a,event:b,data:c})},this.play=function(a){a&&!this.cancelled?this.pausedCallbacks.forEach(function(a){this[a.action](a.event,a.data)},this):this.gestureHandler.cancelGesture(this),this.paused=!1,this.pausedCallbacks=[],this.reset()},this.setOptions=function(){Object.keys(this.defaults).forEach(function(a){this.options[a]=this.binder.options&&"undefined"!=typeof this.binder.options[a]?this.binder.options[a]:this.defaults[a]},this)},this.hasMoreTouches=function(a){return this.countTouches=a.length>this.countTouches?a.length:this.countTouches,this.countTouches>0&&this.countTouches>this.options.touches},this.hasNotEqualTouches=function(a){return this.hasMoreTouches(a),this.countTouches>0&&this.countTouches!==this.options.touches},this.hasEqualTouches=function(a){return this.countTouches=a.length,this.countTouches===this.options.touches},this.isValidMouseButton=function(b,c){if(a.utils.touch)return!0;if(a.utils.msPointer&&b.pointerType!==b.MSPOINTER_TYPE_MOUSE)return!0;var d,e=b.button,f=b.which;return d=f||void 0===e?f:1&e?1:2&e?3:4&e?2:0,a.utils.isArray(c)?c.some(function(a){return d===a}):d===c},this.reset=function(){this.paused||(this.started=!1,this.cancelled=!1,this.countTouches=0)},b})}(window.Touche),function(a){"use strict";a.Binder=Object.augment(function(){function b(a){this.bind(a)}return this.start=a.utils.noop,this.update=a.utils.noop,this.end=a.utils.noop,this.cancel=a.utils.noop,this.bind=function(a){Object.keys(a||{}).forEach(function(b){this[b]=a[b]},this)},b})}(window.Touche),function(a,b){"use strict";a.Point=function(a,b){this.x=a,this.y=b},a.Point.prototype.distanceTo=function(a){var c=this.x-a.x,d=this.y-a.y,e=b(c*c+d*d);return e},a.Point.prototype.normalize=function(){var c=b(this.x*this.x+this.y*this.y),d=this.x/c,e=this.y/c;return new a.Point(d,e)}}(window.Touche,Math.sqrt),function(a){"use strict";a.Rect=function(a,b,c,d){this.x=a,this.y=b,this.width=c,this.height=d},a.Rect.prototype.pointInside=function(a,b){b=b||0;var c=this.x-b,d=this.y-b,e=this.x+this.width+b,f=this.y+this.height+b;return a.x>=c&&a.x<=e&&a.y>=d&&a.y<=f}}(window.Touche),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=(new Date).getTime(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),function(a){"use strict";var b=a.Gesture.augment(function(b){function c(){b.apply(this,arguments)}return this.defaults={areaThreshold:5,timeThreshold:400,touches:1,precedence:4,preventDefault:!0,which:1},this.on=function(b){this.count=0,a(b).on("tap",{options:{areaThreshold:this.options.areaThreshold,preventDefault:this.options.preventDefault,touches:this.options.touches,which:this.options.which},id:this.id,end:this.end})},this.off=function(b){a(b).off("tap",this.id)},this.end=function(a,b){if(!this.isValidMouseButton(a,this.options.which))return this.cancel(),void 0;var c=this;++c.count,1===c.count?(c.startTime=+new Date,c.gestureHandler.pause(null,this),c.timerId=setTimeout(function(){c.gestureHandler.play(!0),c.count=0},c.options.timeThreshold+5)):2===c.count&&(window.clearTimeout(c.timerId),c.endTime=+new Date,c.startTime+c.options.timeThreshold>=c.endTime&&(c.gestureHandler.play(),c.binder.end.call(c,a,b)),c.count=0),this.options.preventDefault&&a.preventDefault()},this.cancel=function(){this.cancelled=!0,window.clearTimeout(this.timerId)},c});a.gestures.add("doubletap",b)}(window.Touche),function(a){"use strict";var b=a.Gesture.augment(function(b){function c(){b.apply(this,arguments)}return this.defaults={areaThreshold:5,timeThreshold:800,precedence:5,preventDefault:!0,touches:1,interval:25,which:1},this.preventDefaultForMSPointer=function(b){if(a.utils.msPointer){var c=window.document,d=["MSHoldVisual","MSGestureHold","contextmenu"],e=function(a){a.preventDefault()};d.forEach(function(a){c[b?"addEventListener":"removeEventListener"](a,e,!1)})}},this.pause=function(){this.paused=!0,window.clearTimeout(this.timerId)},this.start=function(b,c){if(!this.isValidMouseButton(b,this.options.which)||this.hasMoreTouches(c.pagePoints))return this.cancel(),void 0;this.rect=a.utils.getRect(this.gestureHandler.element),this.count=0,this.intervalSteps=this.options.timeThreshold/this.options.interval,this.startTime=+new Date;var d=this;window.clearTimeout(d.timerId),d.timerId=window.setInterval(function(){++d.count,c.percentage=d.count/d.intervalSteps*100,1===d.count?(d.started=!0,d.binder.start.call(d,b,c)):d.binder.update.call(d,b,c),d.count>=d.intervalSteps&&window.clearTimeout(d.timerId)},this.options.interval),this.options.preventDefault&&(b.preventDefault(),this.preventDefaultForMSPointer(!0))},this.update=function(a,b){(this.hasMoreTouches(b.pagePoints)||!this.rect.pointInside(b.pagePoints[0],this.options.areaThreshold))&&this.cancel(),this.options.preventDefault&&a.preventDefault()},this.end=function(a,b){return window.clearTimeout(this.timerId),this.hasNotEqualTouches(b.pagePoints)?(this.cancel(),void 0):(this.rect.pointInside(b.pagePoints[0],this.options.areaThreshold)&&this.startTime+this.options.timeThreshold<=+new Date?(this.gestureHandler.cancelGestures(this.type),this.binder.end.call(this,a,b)):this.cancel(),this.options.preventDefault&&(a.preventDefault(),this.preventDefaultForMSPointer(!1)),void 0)},this.cancel=function(){window.clearTimeout(this.timerId),this.cancelled||(this.cancelled=!0,this.started&&this.binder.cancel.call(this),this.options.preventDefault&&this.preventDefaultForMSPointer(!1))},c});a.gestures.add("longtap",b)}(window.Touche),function(a,b){"use strict";var c=a.Gesture.augment(function(c){function d(){c.apply(this,arguments)}return this.defaults={touches:2,pinchThreshold:12,preventDefault:!0},this.start=function(b,c){return this.rect=a.utils.getRect(this.gestureHandler.element),this.pinch={start:{},current:{}},this.hasMoreTouches(c.pagePoints)?(this.cancel(),void 0):(this.pinch.start.point1=c.pagePoints[0],this.pinch.start.point2=c.pagePoints[1],this.options.preventDefault&&b.preventDefault(),void 0)},this.update=function(c,d){return this.hasMoreTouches(d.pagePoints)?(this.cancel(),void 0):(this.hasEqualTouches(d.pagePoints)&&(this.pinch.start.point2?(d.centerPoint||(d.centerPoint=new a.Point((this.pinch.start.point1.x+this.pinch.start.point2.x)/2,(this.pinch.start.point1.y+this.pinch.start.point2.y)/2)),this.pinch.current.point1=d.pagePoints[0],this.pinch.current.point2=d.pagePoints[1],this.startDistance=this.pinch.start.point2.distanceTo(this.pinch.start.point1),this.lastDistance=this.currentDistance,this.currentDistance=this.pinch.current.point2.distanceTo(this.pinch.current.point1),this.pinchLength=b(this.startDistance-this.currentDistance),this.scale=this.currentDistance/this.startDistance,d.scale=this.scale,d.delta=this.currentDistance-this.lastDistance,d.centerPoint.x=(this.pinch.current.point1.x+this.pinch.current.point2.x)/2,d.centerPoint.y=(this.pinch.current.point1.y+this.pinch.current.point2.y)/2,!this.started&&this.pinchLength>=this.options.pinchThreshold?(this.started=!0,this.gestureHandler.cancelGestures(this.type),this.binder.start.call(this,c,d)):this.started&&this.binder.update.call(this,c,d)):this.pinch.start.point2=d.pagePoints[1]),this.options.preventDefault&&c.preventDefault(),void 0)},this.end=function(a,b){this.started&&this.binder.end.call(this,a,b),this.options.preventDefault&&a.preventDefault()},this.cancel=function(){this.cancelled||(this.cancelled=!0,this.started&&this.binder.cancel.call(this.bindingObj))},d});a.gestures.add("pinch",c)}(window.Touche,Math.abs),function(a){"use strict";var b=a.Gesture.augment(function(b){function c(){b.apply(this,arguments)}return this.defaults={touches:2,rotationThreshold:12,preventDefault:!0},this.start=function(b,c){return this.rect=a.utils.getRect(this.gestureHandler.element),this.rotate={start:{},current:{}},this.hasMoreTouches(c.pagePoints)?(this.cancel(),void 0):(this.rotate.start.point1=c.pagePoints[0],this.rotate.start.point2=c.pagePoints[1],this.options.preventDefault&&b.preventDefault(),void 0)},this.update=function(b,c){return this.hasMoreTouches(c.pagePoints)?(this.cancel(),void 0):(this.hasEqualTouches(c.pagePoints)&&(this.rotate.start.point2?(this.rotate.current.point1=c.pagePoints[0],this.rotate.current.point2=c.pagePoints[1],this.startAngle=a.utils.getDeltaAngle(this.rotate.start.point2,this.rotate.start.point1),this.currentAngle=a.utils.getDeltaAngle(this.rotate.current.point2,this.rotate.current.point1),this.rotation=this.currentAngle-this.startAngle,c.rotation=this.rotation,!this.started&&Math.abs(this.rotation)>=this.options.rotationThreshold?(this.started=!0,this.gestureHandler.cancelGestures(this.type),this.binder.start.call(this,b,c)):this.started&&this.binder.update.call(this,b,c)):this.rotate.start.point2=c.pagePoints[1]),this.options.preventDefault&&b.preventDefault(),void 0)},this.end=function(a,b){this.started&&this.binder.end.call(this,a,b),this.options.preventDefault&&a.preventDefault()},this.cancel=function(){this.cancelled||(this.cancelled=!0,this.started&&this.bindingObj.cancel.call(this.bindingObj))},c});a.gestures.add("rotate",b)}(window.Touche),function(a,b){"use strict";var c=a.Gesture.augment(function(c){function d(){c.apply(this,arguments)}return this.defaults={radiusThreshold:12,preventDefault:!0,touches:1,which:1,useMomentum:!0},this.setSwipe=function(c){this.swipe.lastTime=this.swipe.currentTime,this.swipe.lastPoint=this.swipe.currentPoint,this.swipe.currentPoint=c,this.swipe.currentTime=+new Date,this.swipe.deltaX=this.swipe.currentPoint.x-this.swipe.startPoint.x,this.swipe.deltaY=this.swipe.currentPoint.y-this.swipe.startPoint.y,this.swipe.curDeltaX=this.swipe.currentPoint.x-this.swipe.lastPoint.x,this.swipe.curDeltaY=this.swipe.currentPoint.y-this.swipe.lastPoint.y,this.swipe.velocity=a.utils.getVelocity(this.swipe.startPoint,this.swipe.currentPoint,this.swipe.startTime,this.swipe.currentTime),this.swipe.momentum=a.utils.getVelocity(this.swipe.lastPoint,this.swipe.currentPoint,this.swipe.lastTime,this.swipe.currentTime),this.swipe.angle=a.utils.getAngle(this.swipe.startPoint,this.swipe.currentPoint),this.swipe.direction=a.utils.getDirection(this.swipe.angle),this.swipe.elementDistance="left"===this.swipe.direction||"right"===this.swipe.direction?this.rect.width:this.rect.height,this.swipe.distance="left"===this.swipe.direction||"right"===this.swipe.direction?b(this.swipe.deltaX):b(this.swipe.deltaY),this.swipe.percentage=this.swipe.distance/this.swipe.elementDistance*100},this.start=function(b,c){return this.rect=a.utils.getRect(this.gestureHandler.element),this.swipe={inEndMomentum:!1},this.countTouches=0,!this.isValidMouseButton(b,this.options.which)||this.hasMoreTouches(c.pagePoints)?(this.cancel(),void 0):(this.swipe.startPoint=this.swipe.currentPoint=c.pagePoints[0],this.swipe.startTime=this.swipe.currentTime=+new Date,this.options.preventDefault&&b.preventDefault(),void 0)},this.update=function(a,b){return this.hasMoreTouches(b.pagePoints)?(this.cancel(),void 0):(this.hasEqualTouches(b.pagePoints)&&(this.setSwipe(b.pagePoints[0]),b.swipe=this.swipe,!this.started&&this.swipe.startPoint.distanceTo(this.swipe.currentPoint)>=this.options.radiusThreshold?(this.gestureHandler.cancelGestures(this.type),this.started=!0,this.binder.start.call(this,a,b)):this.started&&this.binder.update.call(this,a,b),this.swipe.startTime=this.swipe.currentTime),this.options.preventDefault&&a.preventDefault(),void 0)},this.end=function(b,c){var d,e,f,g,h;this.started&&(this.options.useMomentum?(this.swipe.inEndMomentum=!0,d=new a.Point(this.swipe.curDeltaX,this.swipe.curDeltaY).normalize(),e=this.swipe.momentum,f=this,g=new a.Point(c.points[0].x,c.points[0].y),h=function(){e*=.95,f.swipe.inEndMomentum&&e>1?(g.x+=d.x*e,g.y+=d.y*e,c.pagePoints[0]=new a.Point(g.x,g.y),f.update(b,c),window.requestAnimationFrame(h)):f.binder.end.call(this,b,c)},window.requestAnimationFrame(h)):this.binder.end.call(this,b,c)),this.options.preventDefault&&b.preventDefault()},this.cancel=function(){this.cancelled||(this.cancelled=!0,this.started&&this.binder.cancel.call(this))},d});a.gestures.add("swipe",c)}(window.Touche,Math.abs),function(a){"use strict";var b=a.Gesture.augment(function(b){function c(){b.apply(this,arguments)}return this.defaults={areaThreshold:5,precedence:6,preventDefault:!0,touches:1,which:1},this.start=function(b,c){return this.started=!0,this.rect=a.utils.getRect(this.gestureHandler.element),!this.isValidMouseButton(b,this.options.which)||this.hasMoreTouches(c.pagePoints)?(this.cancel(),void 0):(this.binder.start.call(this,b,c),this.options.preventDefault&&b.preventDefault(),void 0)},this.update=function(a,b){return this.started?this.hasMoreTouches(b.pagePoints)||!this.rect.pointInside(b.pagePoints[0],this.options.areaThreshold)?(this.cancel(),void 0):(this.options.preventDefault&&a.preventDefault(),void 0):void 0},this.end=function(a,b){this.started&&(this.hasNotEqualTouches(b.pagePoints)||(this.rect.pointInside(b.pagePoints[0],this.options.areaThreshold)&&(this.gestureHandler.cancelGestures(this.type),this.binder.end.call(this,a,b)),this.options.preventDefault&&a.preventDefault()))},this.cancel=function(a,b){this.cancelled=!0,this.binder.cancel.call(this,a,b)},c});a.gestures.add("tap",b)}(window.Touche);